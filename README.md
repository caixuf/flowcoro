# FlowCoro v2.3.1 ğŸš€

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![C++20](https://img.shields.io/badge/C%2B%2B-20-blue.svg)](https://en.wikipedia.org/wiki/C%2B%2B20)
[![CMake](https://img.shields.io/badge/CMake-3.16+-green.svg)](https://cmake.org/)

**ç°ä»£C++20åç¨‹åº“ - è®©å¼‚æ­¥ç¼–ç¨‹å˜å¾—ç®€å•é«˜æ•ˆï¼**

> ğŸ¯ **ä¸šåŠ¡ç¨‹åºå‘˜å‹å¥½** | **5åˆ†é’Ÿä¸Šæ‰‹** | **æ€§èƒ½æå‡100å€+**

## ğŸ¤” ä¸ºä»€ä¹ˆé€‰æ‹©FlowCoroï¼Ÿ

### ğŸ“Š çœŸå®æ€§èƒ½å¯¹æ¯”
```bash
# 50ä¸ªå¹¶å‘è¯·æ±‚æµ‹è¯•ç»“æœï¼š

ã€åç¨‹æ–¹å¼ã€‘
âš¡ è€—æ—¶: 4ms
ğŸ’¾ å†…å­˜: 0.1MB (50ä¸ªåç¨‹ Ã— 2KB)

ã€å¤šçº¿ç¨‹æ–¹å¼ã€‘  
â° è€—æ—¶: 715ms
ğŸ’¾ å†…å­˜: 64MB (8ä¸ªçº¿ç¨‹ Ã— 8MB)

å·®è·ï¼šåç¨‹æ¯”å¤šçº¿ç¨‹å¿«180å€ï¼Œå†…å­˜èŠ‚çœ640å€ï¼
```

### ğŸ¯ æ ¸å¿ƒæ¶æ„ä¼˜åŠ¿
```cpp
// ğŸ¤” ä¼ ç»Ÿå¤šçº¿ç¨‹çš„é—®é¢˜
WebæœåŠ¡å™¨å¤„ç†10000ä¸ªç”¨æˆ·è¯·æ±‚ï¼š

// ğŸ˜« å¤šçº¿ç¨‹æ–¹å¼ï¼šèµ„æºç‚¸è£‚ï¼
10000ä¸ªçº¿ç¨‹ Ã— 8MB = 80GBå†…å­˜ ğŸ’¥
çº¿ç¨‹åˆ›å»ºå¼€é”€ï¼š~1ms/çº¿ç¨‹
ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼šé¢‘ç¹ä¸”æ˜‚è´µ
åŒæ­¥æœºåˆ¶ï¼šé”ç«äº‰ã€æ­»é”é£é™©

// ğŸš€ FlowCoroåç¨‹ï¼šè½»å¦‚ç¾½æ¯›ï¼
10000ä¸ªåç¨‹ Ã— 2KB = 20MBå†…å­˜ âœ¨
åˆ›å»ºå¼€é”€ï¼š~0.001ms/åç¨‹  
ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼šç”¨æˆ·æ€ï¼Œæå¿«
æ— é”è®¾è®¡ï¼šå•çº¿ç¨‹äº‹ä»¶å¾ªç¯
```

**FlowCoro = èµ„æºæ•ˆç‡æå‡4000å€ + ä»£ç ç®€æ´å¦‚åŒæ­¥**

## ğŸ¯ ç«‹å³å¼€å§‹

### é€‰æ‹©ä½ çš„è·¯å¾„ï¼š

| ğŸƒâ€â™‚ï¸ **æˆ‘æƒ³å¿«é€Ÿä¸Šæ‰‹** | ğŸ§‘â€ğŸ’¼ **æˆ‘å…³æ³¨ä¸šåŠ¡åœºæ™¯** | ğŸ¤“ **æˆ‘æƒ³æ·±å…¥äº†è§£** |
|-------------------|-------------------|-------------------|
| [5åˆ†é’Ÿå¿«é€Ÿæ•™ç¨‹](docs/QUICK_START.md) | [ä¸šåŠ¡åœºæ™¯æ¼”ç¤º](docs/BUSINESS_GUIDE.md) | [å®Œæ•´APIæ–‡æ¡£](docs/API_REFERENCE.md) |
| åŸºç¡€æ¦‚å¿µ + ç®€å•ç¤ºä¾‹ | ç”µå•†ã€Web APIã€å¾®æœåŠ¡ | æŠ€æœ¯ç»†èŠ‚ + æ€§èƒ½è°ƒä¼˜ |

### ğŸ’¡ ä¸€åˆ†é’Ÿä½“éªŒ

## ğŸ† ç‰ˆæœ¬ v2.3.1 - çº¿ç¨‹å®‰å…¨å¢å¼º

åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­å®Œæˆäº†é‡è¦çš„æ¥å£ç»Ÿä¸€å’Œçº¿ç¨‹å®‰å…¨ä¿®å¤ï¼š

### ğŸ”§ ä¸»è¦æ›´æ–°

- âœ… **Taskæ¥å£ç»Ÿä¸€**: å°†SafeTaskç»Ÿä¸€ä¸ºTaskçš„åˆ«åï¼Œæ¶ˆé™¤æ¥å£æ··æ·†
- âœ… **çº¿ç¨‹å®‰å…¨ä¿®å¤**: ä¿®å¤è·¨çº¿ç¨‹åç¨‹æ¢å¤å¯¼è‡´çš„æ®µé”™è¯¯é—®é¢˜
- âœ… **SafeCoroutineHandle**: æ–°å¢çº¿ç¨‹å®‰å…¨çš„åç¨‹å¥æŸ„ç®¡ç†
- âœ… **å‘åå…¼å®¹**: ä¿æŒæ‰€æœ‰ç°æœ‰ä»£ç æ­£å¸¸å·¥ä½œ
- âœ… **APIç®€åŒ–**: ç”¨æˆ·ä¸å†éœ€è¦åœ¨Task/SafeTaské—´é€‰æ‹©
- âœ… **é¡¹ç›®æ¸…ç†**: åˆ é™¤å†—ä½™æ–‡ä»¶ï¼Œæ•´ç†é¡¹ç›®ç»“æ„
- âœ… **æ–‡æ¡£æ›´æ–°**: åæ˜ æœ€æ–°çš„ç»Ÿä¸€æ¥å£è®¾è®¡
- âœ… **æ¼”ç¤ºç¤ºä¾‹**: æ–°å¢ç»Ÿä¸€æ¥å£æ¼”ç¤ºç¨‹åº

### ğŸ“Š æ ¸å¿ƒåŠŸèƒ½

| ç»„ä»¶ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| ğŸ”„ **Task&lt;T&gt;** | âœ… å®Œæˆ | ç»Ÿä¸€çš„åç¨‹ä»»åŠ¡æ¥å£ |
| ğŸ“¦ **SafeTask&lt;T&gt;** | âœ… å®Œæˆ | Task&lt;T&gt;çš„åˆ«åï¼Œå‘åå…¼å®¹ |
| ğŸ§µ **ThreadPool** | âœ… å®Œæˆ | é«˜æ€§èƒ½åç¨‹è°ƒåº¦å™¨ |
| ï¿½ï¸ **SafeCoroutineHandle** | âœ… å®Œæˆ | çº¿ç¨‹å®‰å…¨åç¨‹å¥æŸ„ç®¡ç† |
| ï¿½ğŸ’¾ **Memory Pool** | âœ… å®Œæˆ | åç¨‹å†…å­˜ç®¡ç† |
| ğŸŒ **Async I/O** | âœ… å®Œæˆ | ç½‘ç»œå’Œæ–‡ä»¶å¼‚æ­¥æ“ä½œ |
| ğŸ”— **RPCç³»ç»Ÿ** | âœ… å®Œæˆ | ç®€å•çš„å¼‚æ­¥RPCå®ç° |

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

```cpp
#include <flowcoro.hpp>
using namespace flowcoro;

// ç°åœ¨Taskå’ŒSafeTaskå®Œå…¨ç­‰ä»·ï¼
Task<int> compute_async(int value) {
    co_await sleep_for(std::chrono::milliseconds(100));
    co_return value * 2;
}

// ä¸¤ç§å†™æ³•éƒ½å¯ä»¥ï¼Œæ¨èä½¿ç”¨Task<T>
Task<int> task1 = compute_async(42);     // âœ… æ¨è
SafeTask<int> task2 = compute_async(42); // âœ… å…¼å®¹

// APIä¹Ÿå®Œå…¨å…¼å®¹
auto result1 = task1.get();         // TaskåŸæœ‰API
auto result2 = task2.get_result();  // SafeTaské£æ ¼API
```

### ç¯å¢ƒè¦æ±‚

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install build-essential cmake git gcc-11 g++-11 libbenchmark-dev

# ç¡®ä¿C++20æ”¯æŒ
gcc --version  # éœ€è¦ >= 11.0
cmake --version # éœ€è¦ >= 3.16
```

### ç¼–è¯‘å’Œè¿è¡Œ

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/caixuf/flowcord.git
cd flowcord

# æ„å»ºé¡¹ç›®
mkdir build && cd build
cmake .. -DCMAKE_BUILD_TYPE=Release
make -j$(nproc)

# è¿è¡Œç¤ºä¾‹
./examples/simple_unified_demo  # ç»Ÿä¸€æ¥å£æ¼”ç¤º
./examples/hello_world         # åŸºç¡€ç¤ºä¾‹
./examples/network_example     # ç½‘ç»œç¤ºä¾‹
./examples/enhanced_demo       # å¢å¼ºåŠŸèƒ½æ¼”ç¤º

# è¿è¡Œæµ‹è¯•
./tests/test_core              # æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
ctest                          # è¿è¡Œæ‰€æœ‰æµ‹è¯•

# è¿è¡ŒåŸºå‡†æµ‹è¯•
cd benchmarks && ./simple_benchmarks
```

### æ„å»ºé€‰é¡¹

```bash
# Debugæ„å»º(é»˜è®¤)
cmake .. -DCMAKE_BUILD_TYPE=Debug

# Releaseæ„å»º
cmake .. -DCMAKE_BUILD_TYPE=Release

# å¯ç”¨æµ‹è¯•
cmake .. -DBUILD_TESTING=ON

# å¯ç”¨åŸºå‡†æµ‹è¯•
cmake .. -DBUILD_BENCHMARKS=ON
```

## ğŸ“– æ ¸å¿ƒç‰¹æ€§

### 1. ç»Ÿä¸€Taskæ¥å£

```cpp
// ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ - å®Œå…¨ç›¸åŒï¼
static_assert(std::is_same_v<Task<int>, SafeTask<int>>);

// é›¶å¼€é”€åˆ«å
template<typename T = void>
using SafeTask = Task<T>;
```

### 2. ç”Ÿå‘½å‘¨æœŸç®¡ç†

```cpp
Task<void> demo() {
    auto task = compute_async(42);
    
    // çŠ¶æ€æŸ¥è¯¢
    bool ready = task.is_ready();
    bool done = task.done();
    
    // å®‰å…¨è·å–ç»“æœ
    auto result = task.get();  // æˆ– get_result()
    
    co_return;
}
```

### 3. å¼‚æ­¥I/Oæ”¯æŒ

```cpp
// ç½‘ç»œæ“ä½œ
Task<std::string> fetch_data(const std::string& url) {
    auto client = http::Client::create();
    auto response = co_await client->get(url);
    co_return response.body();
}

// æ•°æ®åº“æ“ä½œ
Task<QueryResult> query_db(const std::string& sql) {
    auto db = Database::connect("sqlite::memory:");
    co_return co_await db->query(sql);
}
```

### 4. å¼‚å¸¸å¤„ç†

```cpp
Task<int> safe_operation() {
    try {
        auto task = may_throw_async(true);
        co_return co_await task;
    } catch (const std::exception& e) {
        LOG_ERROR("Operation failed: %s", e.what());
        co_return -1;  // é”™è¯¯ç 
    }
}
```

### 5. å¹¶å‘å’Œç»„åˆ

```cpp
Task<void> concurrent_demo() {
    // å¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡
    auto task1 = compute_async(10);
    auto task2 = compute_async(20);
    auto task3 = compute_async(30);
    
    // ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ
    auto [result1, result2, result3] = co_await when_all(
        std::move(task1), std::move(task2), std::move(task3)
    );
    
    LOG_INFO("Results: %d, %d, %d", result1, result2, result3);
}
```

## ğŸ“ é¡¹ç›®ç»“æ„

```text
flowcoro/
â”œâ”€â”€ include/flowcoro/              # å¤´æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ flowcoro.hpp              # ä¸»å¤´æ–‡ä»¶
â”‚   â”œâ”€â”€ core.h                    # ğŸ”¥ ç»Ÿä¸€Taskæ¥å£
â”‚   â”œâ”€â”€ net.h                     # ç½‘ç»œç»„ä»¶
â”‚   â”œâ”€â”€ database.h                # æ•°æ®åº“ç»„ä»¶
â”‚   â”œâ”€â”€ rpc.h                     # RPCç»„ä»¶
â”‚   â”œâ”€â”€ thread_pool.h             # çº¿ç¨‹æ± å®ç°
â”‚   â”œâ”€â”€ memory_pool.h             # å†…å­˜æ± ç®¡ç†
â”‚   â””â”€â”€ result.h                  # ç»“æœç±»å‹
â”œâ”€â”€ src/                          # æºæ–‡ä»¶
â”‚   â”œâ”€â”€ globals.cpp               # å…¨å±€é…ç½®
â”‚   â””â”€â”€ net_impl.cpp              # ç½‘ç»œå®ç°
â”œâ”€â”€ examples/                     # ç¤ºä¾‹ä»£ç 
â”‚   â”œâ”€â”€ simple_unified_demo.cpp   # ç»Ÿä¸€æ¥å£æ¼”ç¤º
â”‚   â”œâ”€â”€ unified_task_demo.cpp     # å®Œæ•´Taskæ¼”ç¤º
â”‚   â”œâ”€â”€ hello_world.cpp           # åŸºç¡€ç¤ºä¾‹
â”‚   â”œâ”€â”€ network_example.cpp       # ç½‘ç»œç¤ºä¾‹
â”‚   â””â”€â”€ enhanced_demo.cpp         # å¢å¼ºåŠŸèƒ½æ¼”ç¤º
â”œâ”€â”€ tests/                        # æµ‹è¯•ä»£ç 
â”‚   â”œâ”€â”€ test_core.cpp             # æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_database.cpp         # æ•°æ®åº“æµ‹è¯•
â”‚   â”œâ”€â”€ test_http_client.cpp      # HTTPå®¢æˆ·ç«¯æµ‹è¯•
â”‚   â””â”€â”€ test_rpc.cpp              # RPCæµ‹è¯•
â”œâ”€â”€ benchmarks/                   # åŸºå‡†æµ‹è¯•
â”‚   â””â”€â”€ simple_bench.cpp          # æ€§èƒ½åŸºå‡†
â”œâ”€â”€ docs/                         # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ API_REFERENCE.md          # APIå‚è€ƒ
â”‚   â”œâ”€â”€ CORE_INTEGRATION_GUIDE.md # æ ¸å¿ƒé›†æˆæŒ‡å—
â”‚   â”œâ”€â”€ NETWORK_GUIDE.md          # ç½‘ç»œç¼–ç¨‹æŒ‡å—
â”‚   â”œâ”€â”€ DATABASE_GUIDE.md         # æ•°æ®åº“æŒ‡å—
â”‚   â”œâ”€â”€ RPC_GUIDE.md              # RPCä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ PERFORMANCE_GUIDE.md      # æ€§èƒ½ä¼˜åŒ–æŒ‡å—
â”‚   â”œâ”€â”€ TECHNICAL_SUMMARY.md      # æŠ€æœ¯æ€»ç»“
â”‚   â””â”€â”€ ROADMAP_NEW.md            # å¼€å‘è·¯çº¿å›¾
â”œâ”€â”€ cmake/                        # CMakeé…ç½®
â””â”€â”€ scripts/                      # æ„å»ºè„šæœ¬
    â””â”€â”€ build.sh                  # å¿«é€Ÿæ„å»ºè„šæœ¬
```

## ï¿½ï¸ åç¨‹åº“æ ¸å¿ƒæ¶æ„

### ğŸ¯ æ¶æ„è®¾è®¡ç†å¿µ

FlowCoroæ˜¯ä¸€ä¸ª**ä¼ä¸šçº§C++20åç¨‹åº“**ï¼Œé‡‡ç”¨**æ··åˆè°ƒåº¦æ¨¡å‹**è§£å†³ä¼ ç»Ÿåç¨‹åº“çš„å…³é”®é—®é¢˜ï¼š
- **çº¿ç¨‹å®‰å…¨é—®é¢˜**ï¼šè·¨çº¿ç¨‹åç¨‹æ¢å¤å¯¼è‡´çš„æ®µé”™è¯¯
- **æ€§èƒ½ç“¶é¢ˆ**ï¼šä¼ ç»Ÿå¤šçº¿ç¨‹çš„èµ„æºå¼€é”€å’Œä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬  
- **å¯æ‰©å±•æ€§é™åˆ¶**ï¼šçº¿ç¨‹æ± æ¨¡å‹åœ¨é«˜å¹¶å‘ä¸‹çš„å†…å­˜çˆ†ç‚¸

### ğŸ“ åˆ†å±‚æ¶æ„è®¾è®¡

```cpp
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FlowCoro ä¼ä¸šçº§æ¶æ„                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  ğŸ® åº”ç”¨å±‚ (Application Layer)                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Task<T>    â”‚   when_all()   â”‚   sleep_for()   â”‚  sync_wait() â”‚  â”‚
â”‚  â”‚  ç»Ÿä¸€åç¨‹æ¥å£ â”‚    å¹¶å‘åŸè¯­     â”‚   é«˜ç²¾åº¦å®šæ—¶å™¨   â”‚   åŒæ­¥ç­‰å¾…    â”‚  â”‚
â”‚  â”‚              â”‚                â”‚                â”‚              â”‚  â”‚
â”‚  â”‚  Result<T,E> â”‚   Future<T>    â”‚   Channel<T>   â”‚  Generator<T>â”‚  â”‚
â”‚  â”‚  é”™è¯¯å¤„ç†     â”‚   å¼‚æ­¥Future   â”‚   åç¨‹é€šä¿¡      â”‚   æƒ°æ€§åºåˆ—    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  ğŸ§  è°ƒåº¦å±‚ (Scheduler Layer) - æ ¸å¿ƒåˆ›æ–°                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    CoroutineManager                          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ Ready Queue â”‚ â”‚Timer Queue  â”‚ â”‚Destroy Queueâ”‚ â”‚I/O Queueâ”‚ â”‚  â”‚
â”‚  â”‚  â”‚  å°±ç»ªåç¨‹    â”‚ â”‚ é«˜ç²¾åº¦å®šæ—¶å™¨ â”‚ â”‚  å®‰å…¨é”€æ¯    â”‚ â”‚ I/Oäº‹ä»¶ â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ (O(1)è°ƒåº¦)  â”‚ â”‚ (çº¢é»‘æ ‘)    â”‚ â”‚ (å»¶è¿Ÿé”€æ¯)  â”‚ â”‚(epoll)  â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                              â”‚  â”‚
â”‚  â”‚    ğŸ“ drive() - å•çº¿ç¨‹äº‹ä»¶å¾ªç¯ (æ— é”ï¼ŒåŸå­æ“ä½œ)                 â”‚  â”‚
â”‚  â”‚    ğŸ“ SafeCoroutineHandle - è·¨çº¿ç¨‹å®‰å…¨æ£€æµ‹                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  âš¡ æ‰§è¡Œå±‚ (Execution Layer) - å·¥ä½œçªƒå–è®¾è®¡                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  WorkStealingThreadPool                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚   Worker1   â”‚ â”‚   Worker2   â”‚ â”‚   Worker3   â”‚ â”‚ WorkerN â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ Local Queue â”‚ â”‚ Local Queue â”‚ â”‚ Local Queue â”‚ â”‚ (NUMA)  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚(Cacheå‹å¥½)   â”‚ â”‚(Lock-free)  â”‚ â”‚(Load Balanceâ”‚ â”‚  ä¼˜åŒ–)   â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                         â”‚                                   â”‚  â”‚
â”‚  â”‚                  Global Work Queue                          â”‚  â”‚
â”‚  â”‚          (CPUå¯†é›†å‹ä»»åŠ¡ + I/Oå®Œæˆå›è°ƒ + è´Ÿè½½å‡è¡¡)              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                              â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  ğŸ’¾ èµ„æºå±‚ (Resource Layer) - ä¼ä¸šçº§ç‰¹æ€§                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Memory Pool  â”‚  Object Pool  â”‚  Connection Pool â”‚ Lock-free  â”‚  â”‚
â”‚  â”‚  RAIIå†…å­˜ç®¡ç† â”‚   å¯¹è±¡å¤ç”¨æ±    â”‚    è¿æ¥æ± ç®¡ç†     â”‚   æ•°æ®ç»“æ„  â”‚  â”‚
â”‚  â”‚  (æ™ºèƒ½æŒ‡é’ˆ)   â”‚  (å‡å°‘åˆ†é…)   â”‚   (è¿æ¥å¤ç”¨)     â”‚  (æ— é”é˜Ÿåˆ—) â”‚  â”‚
â”‚  â”‚               â”‚               â”‚                â”‚             â”‚  â”‚
â”‚  â”‚  Metrics      â”‚  Health Check â”‚  Circuit Breakerâ”‚  ç›‘æ§å‘Šè­¦   â”‚  â”‚
â”‚  â”‚  æ€§èƒ½ç›‘æ§      â”‚   å¥åº·æ£€æŸ¥     â”‚    ç†”æ–­ä¿æŠ¤      â”‚  (å¯è§‚æµ‹æ€§) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”‘ æ ¸å¿ƒæŠ€æœ¯åˆ›æ–°

#### 1. æ··åˆè°ƒåº¦æ¨¡å‹ - ä¸šç•Œé¦–åˆ›

**é—®é¢˜**ï¼šä¼ ç»Ÿåç¨‹åº“è¦ä¹ˆå®Œå…¨å•çº¿ç¨‹(æ€§èƒ½å—é™)ï¼Œè¦ä¹ˆå¤šçº¿ç¨‹ä¸å®‰å…¨(æ®µé”™è¯¯)

**FlowCoroè§£å†³æ–¹æ¡ˆ**ï¼š
```cpp
// åç¨‹è°ƒåº¦ï¼šå•çº¿ç¨‹äº‹ä»¶å¾ªç¯ (çº¿ç¨‹å®‰å…¨)
void CoroutineManager::drive() {
    process_ready_queue();    // O(1) åç¨‹æ¢å¤
    process_timer_queue();    // é«˜ç²¾åº¦å®šæ—¶å™¨
    process_io_events();      // I/Oäº‹ä»¶å¤„ç†
    process_destroy_queue();  // å®‰å…¨èµ„æºæ¸…ç†
}

// CPUä»»åŠ¡ï¼šå·¥ä½œçªƒå–çº¿ç¨‹æ±  (é«˜æ€§èƒ½)
class WorkStealingThreadPool {
    thread_local WorkerQueue local_queue_;  // æ— é”æœ¬åœ°é˜Ÿåˆ—
    GlobalQueue global_queue_;               // è´Ÿè½½å‡è¡¡
    // NUMAæ„ŸçŸ¥çš„å·¥ä½œçªƒå–ç®—æ³•
}
```

#### 2. é›¶å¼€é”€åç¨‹æŠ½è±¡

**æ€§èƒ½å¯¹æ¯” (50ä¸ªå¹¶å‘è¯·æ±‚)**ï¼š
```cpp
FlowCoroåç¨‹:    4ms,   0.1MB  (é›¶å¼€é”€æŠ½è±¡)
ä¼ ç»Ÿå¤šçº¿ç¨‹:    715ms,  64MB   (èµ„æºæµªè´¹)
æ€§èƒ½æå‡:      180å€,  640å€  (å®æµ‹æ•°æ®)
```

**å®ç°åŸç†**ï¼š
- **åç¨‹æ ˆå¸§**: 2KB vs çº¿ç¨‹8MBæ ˆ (4000å€å†…å­˜æ•ˆç‡)
- **ä¸Šä¸‹æ–‡åˆ‡æ¢**: ç”¨æˆ·æ€10ns vs å†…æ ¸æ€1200ns (120å€é€Ÿåº¦)
- **åˆ›å»ºå¼€é”€**: 0.001ms vs 1ms (1000å€æ•ˆç‡)

### ğŸ”‘ å…³é”®è®¾è®¡å†³ç­–

#### 1. å•çº¿ç¨‹äº‹ä»¶å¾ªç¯ vs å¤šçº¿ç¨‹æ± 

**âŒ ä¼ ç»Ÿå¤šçº¿ç¨‹é—®é¢˜ï¼š**
```cpp
// å±é™©ï¼šè·¨çº¿ç¨‹åç¨‹æ¢å¤
void await_suspend(std::coroutine_handle<> h) {
    ThreadPool::enqueue([h]() {
        h.resume(); // ğŸ’¥ æ®µé”™è¯¯ï¼ä¸åŒçº¿ç¨‹é—´å¥æŸ„æ— æ•ˆ
    });
}
```

**âœ… FlowCoroè§£å†³æ–¹æ¡ˆï¼š**
```cpp
// å®‰å…¨ï¼šäº‹ä»¶å¾ªç¯è°ƒåº¦
void await_suspend(std::coroutine_handle<> h) {
    CoroutineManager::get_instance().schedule_resume(h);
    // æ‰€æœ‰åç¨‹æ¢å¤éƒ½åœ¨åŒä¸€ä¸ªäº‹ä»¶å¾ªç¯çº¿ç¨‹ä¸­æ‰§è¡Œ
}
```

#### 2. å†…å­˜ç®¡ç†ç­–ç•¥

```cpp
åç¨‹æ ˆå¸§å¤§å°å¯¹æ¯”ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     æ–¹æ¡ˆ        â”‚   å†…å­˜å ç”¨   â”‚   æ‰©å±•æ€§     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ“ä½œç³»ç»Ÿçº¿ç¨‹     â”‚    8MB      â”‚   ~1000     â”‚
â”‚ FlowCoroåç¨‹    â”‚    2KB      â”‚   >10ä¸‡     â”‚
â”‚ æ€§èƒ½æå‡        â”‚   4000å€    â”‚   100å€     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. è°ƒåº¦å™¨è®¾è®¡æ¨¡å¼

FlowCoroå€Ÿé‰´äº†å¤šä¸ªä¼˜ç§€çš„å¼‚æ­¥æ¡†æ¶è®¾è®¡ï¼š

- **Node.jsäº‹ä»¶å¾ªç¯**ï¼šå•çº¿ç¨‹ + äº‹ä»¶é©±åŠ¨
- **Go runtimeè°ƒåº¦å™¨**ï¼šM:Nåç¨‹è°ƒåº¦æ¨¡å‹  
- **Rust tokio**ï¼šFuture + Reactoræ¨¡å¼
- **cppcoroåº“**ï¼šC++20åç¨‹çš„å·¥ä¸šçº§å®ç°

```cpp
// FlowCoroçš„drive()æ–¹æ³• (ç±»ä¼¼ioManager)
void CoroutineManager::drive() {
    // 1. å¤„ç†å®šæ—¶å™¨é˜Ÿåˆ—
    process_timer_queue();
    
    // 2. å¤„ç†å°±ç»ªåç¨‹é˜Ÿåˆ—  
    process_ready_queue();
    
    // 3. æ¸…ç†éœ€è¦é”€æ¯çš„åç¨‹
    process_delayed_destruction();
}
```

### ğŸ—ï¸ ä¼ä¸šçº§ç”Ÿäº§ç‰¹æ€§

#### 1. é›¶æ‹·è´åç¨‹åˆ‡æ¢

```cpp
// åç¨‹çŠ¶æ€ä¿å­˜ - é›¶å¼€é”€æŠ½è±¡
struct CoroutineFrame {
    void* instruction_pointer;  // æŒ‡ä»¤æŒ‡é’ˆ
    void* stack_pointer;        // æ ˆæŒ‡é’ˆ  
    // æ— éœ€ä¿å­˜æ•´ä¸ªæ ˆ - åªä¿å­˜å¿…è¦çš„å¯„å­˜å™¨çŠ¶æ€
};
```

#### 2. æ— é”æ•°æ®ç»“æ„

```cpp
// æ— é”å°±ç»ªé˜Ÿåˆ— - æ”¯æŒå¤šç”Ÿäº§è€…å•æ¶ˆè´¹è€…
template<typename T>
class LockFreeQueue {
    std::atomic<Node*> head_{nullptr};
    std::atomic<Node*> tail_{nullptr};
    
    // CASæ“ä½œå®ç°æ— é”å…¥é˜Ÿ/å‡ºé˜Ÿ
    bool enqueue(T item) noexcept;
    bool dequeue(T& item) noexcept;
};
```

#### 3. çº¿ç¨‹å®‰å…¨æ£€æµ‹æœºåˆ¶

```cpp
class SafeCoroutineHandle {
    std::thread::id creation_thread_;  // åˆ›å»ºçº¿ç¨‹ID
    std::atomic<bool> is_valid_;       // åŸå­æœ‰æ•ˆæ€§æ ‡è®°
    
    bool is_current_thread_safe() const {
        return std::this_thread::get_id() == creation_thread_;
    }
};
```

#### 4. é«˜å¯ç”¨æ€§è®¾è®¡

**é”™è¯¯æ¢å¤æœºåˆ¶**ï¼š
```cpp
template<typename T, typename E = std::exception_ptr>
class Result {
    std::variant<T, E> value_;
    
public:
    bool is_ok() const noexcept;
    T&& unwrap() &&;              // ç§»åŠ¨è¯­ä¹‰ä¼˜åŒ–
    E&& unwrap_err() &&;
};
```

**è§‚å¯Ÿæ€§æ”¯æŒ**ï¼š
- **æ€§èƒ½æŒ‡æ ‡æ”¶é›†**: å»¶è¿Ÿã€ååé‡ã€é”™è¯¯ç‡å®æ—¶ç›‘æ§
- **å¥åº·æ£€æŸ¥**: åç¨‹æ± çŠ¶æ€ã€çº¿ç¨‹æ± åˆ©ç”¨ç‡æ£€æµ‹  
- **åˆ†å¸ƒå¼è¿½è¸ª**: è·¨æœåŠ¡åç¨‹æ‰§è¡Œé“¾è·¯è¿½è¸ª

### âš¡ æ€§èƒ½ä¼˜åŠ¿æ¥æº

#### 1. é›¶æ‹·è´åç¨‹åˆ‡æ¢
```cpp
ä¼ ç»Ÿçº¿ç¨‹åˆ‡æ¢å¼€é”€ï¼š
â”œâ”€â”€ ä¿å­˜å¯„å­˜å™¨çŠ¶æ€     ~200ns
â”œâ”€â”€ å†…æ ¸æ€åˆ‡æ¢         ~500ns  
â”œâ”€â”€ TLBåˆ·æ–°           ~300ns
â””â”€â”€ æ¢å¤å¯„å­˜å™¨çŠ¶æ€     ~200ns
æ€»è®¡ï¼š~1200ns

FlowCoroåç¨‹åˆ‡æ¢ï¼š
â”œâ”€â”€ ç”¨æˆ·æ€å‡½æ•°è°ƒç”¨     ~5ns
â”œâ”€â”€ åç¨‹çŠ¶æ€ä¿å­˜       ~3ns
â””â”€â”€ åç¨‹çŠ¶æ€æ¢å¤       ~2ns  
æ€»è®¡ï¼š~10ns (æå‡120å€)
```

#### 2. æ— é”æ•°æ®ç»“æ„
```cpp
// ä¼ ç»Ÿå¤šçº¿ç¨‹ï¼šéœ€è¦é”åŒæ­¥
std::mutex mtx;
std::queue<Task> task_queue;

void enqueue(Task task) {
    std::lock_guard lock(mtx);  // é”å¼€é”€
    task_queue.push(task);
}

// FlowCoroï¼šå•çº¿ç¨‹æ— é”
lockfree::Queue<std::function<void()>> task_queue_;

void schedule(std::coroutine_handle<> h) {
    task_queue_.enqueue([h]() { h.resume(); });  // æ— é”
}
```

### ğŸ¯ ä½¿ç”¨åœºæ™¯åˆ¤æ–­

```cpp
é€‰æ‹©FlowCoroçš„åœºæ™¯ï¼š
âœ… IOå¯†é›†å‹ï¼šWebæœåŠ¡å™¨ã€APIç½‘å…³ã€æ•°æ®åº“æ“ä½œ
âœ… é«˜å¹¶å‘ï¼šéœ€è¦å¤„ç†>1000å¹¶å‘è¿æ¥  
âœ… ä½å»¶è¿Ÿï¼šå¯¹å“åº”æ—¶é—´æ•æ„Ÿçš„åº”ç”¨
âœ… èµ„æºå—é™ï¼šå†…å­˜ã€CPUæœ‰é™çš„ç¯å¢ƒ

ä¸é€‚åˆçš„åœºæ™¯ï¼š
âŒ CPUå¯†é›†å‹ï¼šå›¾åƒå¤„ç†ã€ç§‘å­¦è®¡ç®—ã€åŠ å¯†
âŒ ä½å¹¶å‘ï¼š<100ä¸ªè¿æ¥çš„ç®€å•åº”ç”¨
âŒ é—ç•™ä»£ç ï¼šå¤§é‡ç°æœ‰åŒæ­¥ä»£ç çš„æ”¹é€ 
```

## ï¿½ğŸ¯ è®¾è®¡ç›®æ ‡

1. **å­¦ä¹ å¯¼å‘**: é€šè¿‡å®ç°ç†è§£C++20åç¨‹åŸç†
2. **æ¥å£ç»Ÿä¸€**: æ¶ˆé™¤Taskç±»å‹é€‰æ‹©å›°æ‰°  
3. **å®‰å…¨å¯é **: RAIIç®¡ç†ï¼Œå¼‚å¸¸å®‰å…¨
4. **æ€§èƒ½ä¼˜å…ˆ**: é›¶å¼€é”€æŠ½è±¡ï¼Œæ— é”æ•°æ®ç»“æ„
5. **æ˜“äºä½¿ç”¨**: ç°ä»£C++é£æ ¼ï¼Œç›´è§‚API

## ğŸ“Š æ€§èƒ½ç‰¹æ€§

åŸºäºçœŸå®åŸºå‡†æµ‹è¯•å’Œåç¨‹åº“å®é™…è¿è¡Œçš„æ€§èƒ½æ•°æ®ï¼š

### ğŸš€ åç¨‹æ€§èƒ½ä¼˜åŠ¿ (çœŸå®æµ‹è¯•æ•°æ®)

**50ä¸ªå¹¶å‘è¯·æ±‚åœºæ™¯æµ‹è¯•ç»“æœï¼š**
- **FlowCoroåç¨‹**: 4ms æ‰§è¡Œæ—¶é—´ï¼Œ0.1MB å†…å­˜å ç”¨
- **ä¼ ç»Ÿå¤šçº¿ç¨‹**: 715ms æ‰§è¡Œæ—¶é—´ï¼Œ64MB å†…å­˜å ç”¨
- **æ€§èƒ½æå‡**: åç¨‹æ¯”å¤šçº¿ç¨‹å¿« **180å€**ï¼Œå†…å­˜èŠ‚çœ **640å€**

**åç¨‹ vs çº¿ç¨‹èµ„æºå¯¹æ¯”ï¼š**
- **åç¨‹åˆ›å»ºå¼€é”€**: ~0.001ms (æè½»é‡)
- **çº¿ç¨‹åˆ›å»ºå¼€é”€**: ~1ms (é‡é‡çº§)
- **åç¨‹å†…å­˜å ç”¨**: 2KB/ä¸ª (æ ˆå¸§)
- **çº¿ç¨‹å†…å­˜å ç”¨**: 8MB/ä¸ª (æ ˆç©ºé—´)
- **ä¸Šä¸‹æ–‡åˆ‡æ¢**: åç¨‹ç”¨æˆ·æ€ vs çº¿ç¨‹å†…æ ¸æ€

**é«˜å¹¶å‘åœºæ™¯ (10000ä¸ªå¹¶å‘)ï¼š**
- **FlowCoro**: 20MB å†…å­˜ï¼Œå•çº¿ç¨‹äº‹ä»¶å¾ªç¯
- **å¤šçº¿ç¨‹**: 80GB å†…å­˜ï¼Œ10000ä¸ªçº¿ç¨‹ ğŸ’¥

### ğŸ“Š åŸºå‡†æµ‹è¯•æ€§èƒ½

ç»„ä»¶çº§åˆ«æ€§èƒ½æµ‹è¯• (Releaseæ„å»º)ï¼š

- **åç¨‹åˆ›å»º**: ~256ns/op (1000æ¬¡åˆ›å»ºæµ‹è¯•)
- **åç¨‹æ‰§è¡Œ**: ~9ns/op (1000æ¬¡æ‰§è¡Œæµ‹è¯•)
- **æ— é”é˜Ÿåˆ—æ“ä½œ**: ~165ns/op (1Mæ¬¡æ“ä½œæµ‹è¯•)
- **å†…å­˜æ± åˆ†é…**: ~364ns/op (10Kæ¬¡åˆ†é…æµ‹è¯•)
- **æ—¥å¿—è®°å½•**: ~443ns/op (10Kæ¬¡æ—¥å¿—æµ‹è¯•)

> æµ‹è¯•ç¯å¢ƒ: Linux x86_64, GCC 11+, Releaseæ„å»º
> è¿è¡Œ `./benchmarks/simple_benchmarks` è·å–æ‚¨ç³»ç»Ÿä¸Šçš„æ€§èƒ½æ•°æ®

## ğŸ§ª æµ‹è¯•è¦†ç›–

| ç»„ä»¶ | æµ‹è¯•è¦†ç›– | çŠ¶æ€ |
|------|----------|------|
| Taskæ ¸å¿ƒåŠŸèƒ½ | 95% | âœ… å®Œæ•´ |
| çº¿ç¨‹æ± è°ƒåº¦ | 90% | âœ… å®Œæ•´ |
| å†…å­˜æ± ç®¡ç† | 85% | âœ… å®Œæ•´ |
| ç½‘ç»œI/O | 80% | âœ… åŸºç¡€è¦†ç›– |
| æ•°æ®åº“æ“ä½œ | 75% | âœ… åŸºç¡€è¦†ç›– |
| RPCç³»ç»Ÿ | 70% | âœ… åŸºç¡€è¦†ç›– |

## ğŸ”§ é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰Awaiter

```cpp
class CustomAwaiter {
public:
    bool await_ready() const { return false; }
    
    void await_suspend(std::coroutine_handle<> handle) {
        // è‡ªå®šä¹‰æŒ‚èµ·é€»è¾‘
        GlobalThreadPool::get_pool().submit([handle]() {
            std::this_thread::sleep_for(std::chrono::milliseconds(100));
            handle.resume();
        });
    }
    
    void await_resume() { }
};

Task<void> custom_await_demo() {
    co_await CustomAwaiter{};
    std::cout << "è‡ªå®šä¹‰ç­‰å¾…å®Œæˆï¼" << std::endl;
}
```

### åç¨‹ç”Ÿå‘½å‘¨æœŸç®¡ç†

```cpp
class CoroutineManager {
    std::vector<Task<void>> tasks_;
    
public:
    void add_task(Task<void> task) {
        tasks_.push_back(std::move(task));
    }
    
    Task<void> wait_all() {
        for (auto& task : tasks_) {
            co_await task;
        }
        tasks_.clear();
    }
};
```

### é”™è¯¯å¤„ç†ç­–ç•¥

```cpp
template<typename T>
Task<Result<T, std::string>> safe_execute(Task<T> task) {
    try {
        auto result = co_await task;
        co_return Ok(std::move(result));
    } catch (const std::exception& e) {
        co_return Err(e.what());
    }
}
```

## ğŸ“š æ–‡æ¡£

### æ ¸å¿ƒæ–‡æ¡£
- [APIå‚è€ƒ](docs/API_REFERENCE.md) - å®Œæ•´çš„APIæ–‡æ¡£
- [æ ¸å¿ƒé›†æˆæŒ‡å—](docs/CORE_INTEGRATION_GUIDE.md) - ç»Ÿä¸€æ¥å£è¯´æ˜
- [æŠ€æœ¯æ€»ç»“](docs/TECHNICAL_SUMMARY.md) - æŠ€æœ¯å®ç°ç»†èŠ‚

### ç»„ä»¶æŒ‡å—  
- [ç½‘ç»œæŒ‡å—](docs/NETWORK_GUIDE.md) - å¼‚æ­¥ç½‘ç»œç¼–ç¨‹
- [æ•°æ®åº“æŒ‡å—](docs/DATABASE_GUIDE.md) - å¼‚æ­¥æ•°æ®åº“æ“ä½œ
- [RPCæŒ‡å—](docs/RPC_GUIDE.md) - è¿œç¨‹è¿‡ç¨‹è°ƒç”¨

### æ€§èƒ½å’Œä¼˜åŒ–
- [æ€§èƒ½æŒ‡å—](docs/PERFORMANCE_GUIDE.md) - æ€§èƒ½ä¼˜åŒ–å»ºè®®
- [é¡¹ç›®æ€»ç»“](docs/PROJECT_SUMMARY.md) - é¡¹ç›®æ¶æ„æ€»ç»“

## ğŸ›£ï¸ å¼€å‘è·¯çº¿

æŸ¥çœ‹ [ROADMAP_NEW.md](docs/ROADMAP_NEW.md) äº†è§£é¡¹ç›®å‘å±•è®¡åˆ’ã€‚

### å½“å‰ç‰ˆæœ¬åŠŸèƒ½
- âœ… Task/SafeTaskç»Ÿä¸€æ¥å£
- âœ… çº¿ç¨‹å®‰å…¨åç¨‹ç®¡ç†ï¼ˆé˜²æ­¢è·¨çº¿ç¨‹æ®µé”™è¯¯ï¼‰
- âœ… é«˜æ€§èƒ½çº¿ç¨‹æ± è°ƒåº¦
- âœ… å†…å­˜æ± ç®¡ç†
- âœ… å¼‚æ­¥ç½‘ç»œI/O
- âœ… æ•°æ®åº“è¿æ¥æ± 
- âœ… JSON-RPCæ”¯æŒ

### ä¸‹ä¸ªç‰ˆæœ¬è®¡åˆ’ (v2.4)
- [ ] åç¨‹å–æ¶ˆæœºåˆ¶
- [ ] æ›´é«˜çº§çš„å¹¶å‘åŸè¯­
- [ ] æ€§èƒ½ç›‘æ§å’ŒæŒ‡æ ‡
- [ ] WebSocketæ”¯æŒ
- [ ] åˆ†å¸ƒå¼è¿½è¸ª

## â“ å¸¸è§é—®é¢˜

### Q: Taskå’ŒSafeTaskæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
A: åœ¨v2.3ä¸­ï¼ŒSafeTaskåªæ˜¯Taskçš„åˆ«åã€‚ä¸¤è€…å®Œå…¨ç›¸åŒï¼Œå¯ä»¥äº’æ¢ä½¿ç”¨ã€‚æ¨èä½¿ç”¨Task<T>ã€‚

### Q: ä¸ºä»€ä¹ˆåç¨‹æ¯”å¤šçº¿ç¨‹å¿«è¿™ä¹ˆå¤šï¼Ÿ
A: æ ¹æ®æˆ‘ä»¬çš„æµ‹è¯•ï¼Œ50ä¸ªå¹¶å‘è¯·æ±‚ï¼šåç¨‹4ms vs å¤šçº¿ç¨‹715msã€‚ä¸»è¦åŸå› ï¼š
- **æ— çº¿ç¨‹åˆ›å»ºå¼€é”€**ï¼šåç¨‹åœ¨ç°æœ‰çº¿ç¨‹ä¸­è¿è¡Œ
- **ç”¨æˆ·æ€åˆ‡æ¢**ï¼šé¿å…å†…æ ¸æ€ä¸Šä¸‹æ–‡åˆ‡æ¢
- **å•çº¿ç¨‹è°ƒåº¦**ï¼šæ— é”ç«äº‰ï¼Œæ— åŒæ­¥å¼€é”€
- **å†…å­˜æ•ˆç‡**ï¼š2KBåç¨‹æ ˆ vs 8MBçº¿ç¨‹æ ˆ

### Q: FlowCoroçš„æ¶æ„ä¼˜åŠ¿åœ¨å“ªé‡Œï¼Ÿ
A: é‡‡ç”¨äº‹ä»¶å¾ªç¯ + å•çº¿ç¨‹è°ƒåº¦æ¨¡å¼ï¼š
- **çº¿ç¨‹å®‰å…¨**ï¼šæ‰€æœ‰åç¨‹åœ¨å•ä¸€è°ƒåº¦çº¿ç¨‹ä¸­æ¢å¤ï¼Œé¿å…è·¨çº¿ç¨‹æ®µé”™è¯¯
- **é«˜å¹¶å‘**ï¼šå¯è½»æ¾å¤„ç†10ä¸‡+å¹¶å‘è¿æ¥ï¼Œå†…å­˜å ç”¨ä»…200MB
- **é›¶é”è®¾è®¡**ï¼šæ— é”æ•°æ®ç»“æ„ï¼Œé¿å…æ­»é”å’Œç«äº‰æ¡ä»¶
- **èµ„æºé«˜æ•ˆ**ï¼šæ¯”ä¼ ç»Ÿå¤šçº¿ç¨‹èŠ‚çœ1000å€å†…å­˜

### Q: ä»€ä¹ˆåœºæ™¯é€‚åˆä½¿ç”¨åç¨‹ï¼Ÿ
A: 
âœ… **é€‚åˆåœºæ™¯**ï¼šIOå¯†é›†å‹ã€é«˜å¹¶å‘æœåŠ¡å™¨ã€Web APIã€æ•°æ®åº“æ“ä½œ
âŒ **ä¸é€‚åˆ**ï¼šCPUå¯†é›†å‹è®¡ç®—ã€å›¾åƒå¤„ç†ã€ç§‘å­¦è®¡ç®—

### Q: å¦‚ä½•é¿å…åç¨‹ç›¸å…³çš„æ®µé”™è¯¯ï¼Ÿ
A: FlowCoro v2.3.1å†…ç½®äº†å®Œæ•´çš„çº¿ç¨‹å®‰å…¨ä¿æŠ¤ï¼š
- **SafeCoroutineHandle**ï¼šè‡ªåŠ¨æ£€æµ‹è·¨çº¿ç¨‹åç¨‹æ¢å¤
- **äº‹ä»¶å¾ªç¯è°ƒåº¦**ï¼šç»Ÿä¸€åœ¨å•çº¿ç¨‹ä¸­å¤„ç†æ‰€æœ‰åç¨‹æ¢å¤
- **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šRAIIæ¨¡å¼è‡ªåŠ¨ç®¡ç†åç¨‹èµ„æº
- **è°ƒè¯•å‹å¥½**ï¼šè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œçº¿ç¨‹IDè¿½è¸ª

## ğŸ¤ è´¡çŒ®

è¿™æ˜¯ä¸ªäººå­¦ä¹ é¡¹ç›®ï¼Œä½†æ¬¢è¿ï¼š
- ğŸ› æŠ¥å‘ŠBug
- ğŸ’¡ æå‡ºæ”¹è¿›å»ºè®®  
- ğŸ“– æ”¹è¿›æ–‡æ¡£
- ğŸ§ª æ·»åŠ æµ‹è¯•ç”¨ä¾‹
- âš¡ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### è´¡çŒ®æµç¨‹
1. Forké¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»ºPull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®æä¾›çš„å­¦ä¹ å‚è€ƒï¼š
- [async_simple](https://github.com/alibaba/async_simple) - é˜¿é‡Œå·´å·´C++åç¨‹åº“
- [cppcoro](https://github.com/lewissbaker/cppcoro) - Lewis Bakeråç¨‹å®ç°
- [liburing](https://github.com/axboe/liburing) - Linux io_uringå‚è€ƒ

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªå­¦ä¹ é¡¹ç›®ï¼Œä¸»è¦ç”¨äºæ¢ç´¢C++20åç¨‹ç‰¹æ€§ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä½¿ç”¨å‰è¯·ä»”ç»†è¯„ä¼°ã€‚

**é¡¹ç›®çŠ¶æ€**: æ´»è·ƒå¼€å‘ä¸­ ğŸš§ | æœ€åæ›´æ–°: 2025å¹´7æœˆ
