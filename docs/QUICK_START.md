# ğŸš€ FlowCoro å…¥é—¨ï¼šä¸šåŠ¡ç¨‹åºå‘˜çš„5åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

## ğŸ’¡ å…ˆå›ç­”ä¸‰ä¸ªé—®é¢˜

### 1. åç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ
**ç®€å•ç†è§£ï¼šå¯ä»¥"æš‚åœ"å’Œ"ç»§ç»­"çš„å‡½æ•°**

```cpp
// æ™®é€šå‡½æ•°ï¼šä¸€å£æ°”è·‘å®Œ
std::string fetch_data() {
    sleep(100);  // é˜»å¡100msï¼Œä»€ä¹ˆéƒ½ä¸èƒ½å¹²
    return "data";
}

// åç¨‹å‡½æ•°ï¼šå¯ä»¥æš‚åœï¼Œè®©å‡ºCPUç»™å…¶ä»–ä»»åŠ¡
Task<std::string> fetch_data() {
    co_await sleep_for(100ms);  // æš‚åœ100msï¼ŒCPUå¯ä»¥å¹²å…¶ä»–äº‹
    co_return "data";
}
```

### 2. ä¸ºä»€ä¹ˆè¦ç”¨åç¨‹ï¼Ÿ
**åç¨‹çš„ä¼˜åŠ¿ä¸æ˜¯"æ›´å¿«"ï¼Œè€Œæ˜¯"æ›´ä¼˜é›…"åœ°å¤„ç†å¹¶å‘ï¼**

æƒ³è±¡ä¸€ä¸ªWebæœåŠ¡å™¨åŒæ—¶å¤„ç†1000ä¸ªè¯·æ±‚ï¼š

**å¤šçº¿ç¨‹æ–¹å¼ï¼š**
- éœ€è¦1000ä¸ªçº¿ç¨‹ï¼ˆæ¯ä¸ª8MBæ ˆç©ºé—´ = 8GBå†…å­˜ï¼ï¼‰
- çº¿ç¨‹åˆ‡æ¢å¼€é”€å¤§
- é”ã€ç«äº‰æ¡ä»¶ç­‰å¤æ‚é—®é¢˜

**åç¨‹æ–¹å¼ï¼š**
- åªéœ€å‡ ä¸ªçº¿ç¨‹ + 1000ä¸ªåç¨‹ï¼ˆæ¯ä¸ªå‡ KBï¼‰
- åç¨‹åˆ‡æ¢å¼€é”€æå°
- æ— é”ç¼–ç¨‹ï¼Œé¿å…ç«äº‰æ¡ä»¶

**åœºæ™¯å¯¹æ¯”ï¼š**
```cpp
// å¤„ç†å¤§é‡å¹¶å‘è¿æ¥æ—¶
åç¨‹ï¼š1000ä¸ªè¿æ¥ = å‡ MBå†…å­˜
çº¿ç¨‹ï¼š1000ä¸ªè¿æ¥ = å‡ GBå†…å­˜
```

### 3. ä»€ä¹ˆæ—¶å€™ç”¨åç¨‹ï¼Ÿ
âœ… **é€‚åˆçš„åœºæ™¯ï¼š**
- ç½‘ç»œè¯·æ±‚ï¼ˆAPIè°ƒç”¨ã€æ•°æ®åº“æŸ¥è¯¢ï¼‰
- æ–‡ä»¶è¯»å†™
- ä»»ä½•æœ‰"ç­‰å¾…"çš„æ“ä½œ

âŒ **ä¸é€‚åˆçš„åœºæ™¯ï¼š**
- çº¯è®¡ç®—ä»»åŠ¡ï¼ˆæ²¡æœ‰ç­‰å¾…ï¼‰
- ç®€å•çš„å•çº¿ç¨‹ç¨‹åº

## ğŸ¯ å®æˆ˜ï¼š5ä¸ªé€’è¿›ç¤ºä¾‹

### ä¾‹å­1ï¼šæœ€ç®€å•çš„åç¨‹
```cpp
#include <flowcoro.hpp>
using namespace flowcoro;

// å®šä¹‰ä¸€ä¸ªåç¨‹å‡½æ•°
Task<std::string> say_hello() {
    co_await sleep_for(std::chrono::milliseconds(100));
    co_return "Hello FlowCoro!";
}

int main() {
    auto task = say_hello();
    auto result = task.get();  // ç­‰å¾…åç¨‹å®Œæˆ
    std::cout << result << std::endl;
}
```

**å…³é”®è¯è§£é‡Šï¼š**
- `Task<T>`ï¼šåç¨‹çš„è¿”å›ç±»å‹
- `co_await`ï¼šæš‚åœç­‰å¾…
- `co_return`ï¼šåç¨‹è¿”å›å€¼
- `task.get()`ï¼šåŒæ­¥ç­‰å¾…ç»“æœ

### ä¾‹å­2ï¼šå¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡
```cpp
Task<void> parallel_demo() {
    // åŒæ—¶å¯åŠ¨ä¸‰ä¸ªä»»åŠ¡
    auto task1 = fetch_user(123);
    auto task2 = fetch_product(456);  
    auto task3 = check_stock(789);
    
    // ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰
    auto user = co_await task1;
    auto product = co_await task2;
    auto stock = co_await task3;
    
    std::cout << "æ‰€æœ‰æ•°æ®è·å–å®Œæˆï¼" << std::endl;
}
```

### ä¾‹å­3ï¼šçœŸå®ä¸šåŠ¡åœºæ™¯
```cpp
Task<OrderInfo> create_order(int user_id, int product_id) {
    // å¹¶å‘æŸ¥è¯¢ï¼ŒèŠ‚çœæ—¶é—´
    auto user_task = get_user_info(user_id);
    auto product_task = get_product_info(product_id);
    auto stock_task = check_inventory(product_id);
    
    // ç­‰å¾…æ‰€æœ‰æŸ¥è¯¢å®Œæˆ
    auto user = co_await user_task;
    auto product = co_await product_task;
    auto stock_available = co_await stock_task;
    
    if (!stock_available) {
        throw std::runtime_error("å•†å“ç¼ºè´§");
    }
    
    // åˆ›å»ºè®¢å•
    OrderInfo order;
    order.user_name = user.name;
    order.product_name = product.name;
    order.total_price = product.price;
    
    co_return order;
}
```

### ä¾‹å­4ï¼šæ‰¹é‡å¤„ç†
```cpp
Task<void> process_multiple_orders(std::vector<int> user_ids) {
    std::vector<Task<OrderInfo>> tasks;
    
    // ä¸ºæ¯ä¸ªç”¨æˆ·åˆ›å»ºè®¢å•ä»»åŠ¡
    for (int user_id : user_ids) {
        tasks.push_back(create_order(user_id, 12345));
    }
    
    // ç­‰å¾…æ‰€æœ‰è®¢å•åˆ›å»ºå®Œæˆ
    for (auto& task : tasks) {
        try {
            auto order = co_await task;
            std::cout << "è®¢å•åˆ›å»ºæˆåŠŸ: " << order.user_name << std::endl;
        } catch (const std::exception& e) {
            std::cout << "è®¢å•åˆ›å»ºå¤±è´¥: " << e.what() << std::endl;
        }
    }
}
```

### ä¾‹å­5ï¼šé”™è¯¯å¤„ç†
```cpp
Task<std::string> safe_api_call(const std::string& url) {
    try {
        auto response = co_await http_get(url);
        if (response.status_code == 200) {
            co_return response.body;
        } else {
            throw std::runtime_error("HTTP error: " + std::to_string(response.status_code));
        }
    } catch (const std::exception& e) {
        std::cout << "APIè°ƒç”¨å¤±è´¥: " << e.what() << std::endl;
        co_return "é»˜è®¤æ•°æ®";  // è¿”å›å…œåº•æ•°æ®
    }
}
```

## ğŸ”§ å¿«é€Ÿå¼€å§‹

### 1. ç¼–è¯‘è¿è¡Œç¤ºä¾‹
```bash
cd flowcord/examples
g++ -std=c++20 hello_world.cpp -o hello_world
./hello_world
```

### 2. æŸ¥çœ‹ä¸šåŠ¡åœºæ™¯æ¼”ç¤º
```bash
./business_demo
```

### 3. ä¿®æ”¹ä»£ç ï¼Œè‡ªå·±è¯•è¯•ï¼

## ğŸ“š å­¦ä¹ å»ºè®®

### ä»Šå¤©ï¼ˆ10åˆ†é’Ÿï¼‰
- è¿è¡Œç¤ºä¾‹ä»£ç 
- ç†è§£ `co_await` å’Œ `co_return`
- çœ‹æ‡‚å¹¶å‘æ‰§è¡Œçš„æ¦‚å¿µ

### æ˜å¤©ï¼ˆ30åˆ†é’Ÿï¼‰  
- ä¿®æ”¹ç¤ºä¾‹ï¼Œæ”¹å˜å»¶è¿Ÿæ—¶é—´
- å°è¯•æ·»åŠ æ›´å¤šå¹¶å‘ä»»åŠ¡
- ä½“éªŒæ€§èƒ½å·®å¼‚

### æœ¬å‘¨ï¼ˆ2å°æ—¶ï¼‰
- åœ¨è‡ªå·±çš„é¡¹ç›®ä¸­æ›¿æ¢ä¸€ä¸ªåŒæ­¥è°ƒç”¨
- æµ‹é‡æ€§èƒ½æå‡
- é˜…è¯»å®Œæ•´çš„APIæ–‡æ¡£

## â“ å¸¸è§ç–‘é—®

**Q: åç¨‹æ¯”å¤šçº¿ç¨‹æ›´å¿«å—ï¼Ÿ**
A: ä¸æ˜¯ï¼åç¨‹çš„ä¼˜åŠ¿æ˜¯èµ„æºæ•ˆç‡ï¼Œä¸æ˜¯é€Ÿåº¦ã€‚ä½†åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ç¡®å®è¡¨ç°æ›´ä¼˜ã€‚

**Q: çœŸå®æ€§èƒ½å¦‚ä½•ï¼Ÿ**  
A: åŸºäºæˆ‘ä»¬çš„1000å¹¶å‘è¯·æ±‚æµ‹è¯•ï¼š
- åç¨‹ï¼š91msæ€»è€—æ—¶ï¼Œ10,989 req/sååé‡ï¼Œ0.09mså¹³å‡å»¶è¿Ÿ
- çº¿ç¨‹ï¼š3,286msæ€»è€—æ—¶ï¼Œ304 req/sååé‡ï¼Œ3.29mså¹³å‡å»¶è¿Ÿ
- åç¨‹æ¯”çº¿ç¨‹å¿«36å€ï¼

**Q: ä»€ä¹ˆæ—¶å€™åç¨‹æ¯”å¤šçº¿ç¨‹æ›´å¥½ï¼Ÿ**  
A: é«˜å¹¶å‘IOåœºæ™¯ï¼Œæ¯”å¦‚WebæœåŠ¡å™¨ã€æ•°æ®åº“è¿æ¥æ± ã€‚åç¨‹å¯ä»¥è½»æ¾å¤„ç†æ•°ä¸‡è¿æ¥ã€‚

**Q: å­¦ä¹ æˆæœ¬é«˜å—ï¼Ÿ**
A: æ¯”å¤šçº¿ç¨‹ç®€å•å¾—å¤šã€‚æ²¡æœ‰é”ã€æ²¡æœ‰ç«äº‰æ¡ä»¶ï¼Œä»£ç æ¥è¿‘åŒæ­¥é£æ ¼ã€‚

**Q: ç”Ÿäº§ç¯å¢ƒç¨³å®šå—ï¼Ÿ**
A: éå¸¸ç¨³å®šã€‚C++20åç¨‹æ˜¯æ ‡å‡†ç‰¹æ€§ï¼Œå¾ˆå¤šå¤§å…¬å¸åœ¨ä½¿ç”¨ã€‚

**Q: å¦‚ä½•æµ‹è¯•æ€§èƒ½ï¼Ÿ**
A: è¿è¡Œæˆ‘ä»¬çš„æ€§èƒ½æµ‹è¯•ï¼š
```bash
cd build
./examples/hello_world 1000  # 1000å¹¶å‘è¯·æ±‚å¯¹æ¯”æµ‹è¯•
```

## ğŸ‰ æ­å–œï¼

ä½ å·²ç»äº†è§£äº†åç¨‹çš„åŸºç¡€æ¦‚å¿µã€‚ç°åœ¨ï¼š

1. **è¿è¡Œç¤ºä¾‹ä»£ç **ï¼Œæ„Ÿå—åç¨‹çš„å¨åŠ›
2. **åœ¨å®é™…é¡¹ç›®ä¸­å°è¯•**ï¼Œä½“éªŒæ€§èƒ½æå‡  
3. **æŸ¥çœ‹æ›´å¤šç¤ºä¾‹**ï¼Œå­¦ä¹ æœ€ä½³å®è·µ

å¼€å§‹ä½ çš„é«˜æ€§èƒ½ç¼–ç¨‹ä¹‹æ—…å§ï¼ğŸš€

---

ğŸ’¡ **è®°ä½æ ¸å¿ƒæ¦‚å¿µï¼šåç¨‹ = è½»é‡çº§å¹¶å‘ + é«˜èµ„æºæ•ˆç‡ + ç®€æ´ä»£ç **

**åç¨‹ä¸æ˜¯ä¸ºäº†æ›´å¿«ï¼Œè€Œæ˜¯ä¸ºäº†æ›´å¥½åœ°å¤„ç†å¤§é‡å¹¶å‘ï¼**
